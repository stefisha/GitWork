# GitWork Visual Flow Diagrams

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         GITWORK ECOSYSTEM                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              GitHub.com
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚             â”‚
              Installation    Labeled PR    PR Merged
                Event         Event        Event
                    â”‚             â”‚             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   GitWork Backend       â”‚
                    â”‚   (Express + Node.js)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                    â”‚                    â”‚
            â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Database   â”‚   â”‚   Solana     â”‚    â”‚   GitHub     â”‚
    â”‚   (SQLite)   â”‚   â”‚  Blockchain  â”‚    â”‚     API      â”‚
    â”‚              â”‚   â”‚              â”‚    â”‚              â”‚
    â”‚  - Bounties  â”‚   â”‚  - Wallets   â”‚    â”‚  - Comments  â”‚
    â”‚  - Activity  â”‚   â”‚  - USDC      â”‚    â”‚  - Issues    â”‚
    â”‚  - Installs  â”‚   â”‚  - Transfer  â”‚    â”‚  - PRs       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Repo Owner Flow (Detailed)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    REPO OWNER CREATES BOUNTY                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     Repo Owner                 GitHub              GitWork            Solana
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
    1. Install                    â”‚                    â”‚                â”‚
       Octavian â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚  Webhook:          â”‚                â”‚
         â”‚                        â”‚  installation â”€â”€â”€â”€â”€â–¶                â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                 Record              â”‚
         â”‚                        â”‚                Installation          â”‚
         â”‚                        â”‚                    â”‚                â”‚
    2. Create Issue               â”‚                    â”‚                â”‚
       "Add dark mode" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
    3. Add Label                  â”‚                    â”‚                â”‚
       "Octavian:USDC:50"â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚  Webhook:          â”‚                â”‚
         â”‚                        â”‚  labeled â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                Parse Label          â”‚
         â”‚                        â”‚                (USDC, 50)           â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚   Generate     â”‚
         â”‚                        â”‚                    â”‚   Keypair  â”€â”€â”€â”€â–¶
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€  Public Key
         â”‚                        â”‚                    â”‚             7Np8E...
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                Save Bounty          â”‚
         â”‚                        â”‚                to Database          â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Post Comment           â”‚
         â”‚  â—€â”€â”€â”€â”€â”€ Notification   â”‚  "Deposit 50      â”‚                â”‚
         â”‚         from GitHub    â”‚   USDC to..."     â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
    4. Read Comment               â”‚                    â”‚                â”‚
       Copy wallet address        â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
    5. Open Phantom/Solflare      â”‚                    â”‚                â”‚
       wallet                     â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
    6. Send 50 USDC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
         â”‚                        â”‚                    â”‚     Blockchain â”‚
         â”‚                        â”‚                    â”‚     confirms   â”‚
         â”‚                        â”‚                    â”‚     transfer   â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
         â”‚                        â”‚            â”‚ Deposit       â”‚        â”‚
         â”‚                        â”‚            â”‚ Monitor       â”‚        â”‚
         â”‚                        â”‚            â”‚ (every 30s)   â”‚        â”‚
         â”‚                        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                Check Balance â”€â”€â”€â”€â”€â”€â”€â–¶
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€ 50 USDC
         â”‚                        â”‚                    â”‚            found!
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚            Update Status            â”‚
         â”‚                        â”‚            to 'deposit_confirmed'   â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Post Comment           â”‚
         â”‚  â—€â”€â”€â”€â”€â”€ Notification   â”‚  "âœ… Bounty      â”‚                â”‚
         â”‚         from GitHub    â”‚   Active!"        â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
    âœ… BOUNTY IS NOW LIVE          â”‚                    â”‚                â”‚
       FOR CONTRIBUTORS            â”‚                    â”‚                â”‚
         â”‚                        â”‚                    â”‚                â”‚
```

## Contributor Flow (When PR Merged)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  CONTRIBUTOR SOLVES & CLAIMS                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   Contributor              GitHub              GitWork            Solana
         â”‚                    â”‚                    â”‚                â”‚
    1. See bounty issue       â”‚                    â”‚                â”‚
       on GitHub â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                    â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
    2. Fork & clone           â”‚                    â”‚                â”‚
       repository â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                    â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
    3. Write code             â”‚                    â”‚                â”‚
       locally                â”‚                    â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
    4. Create PR              â”‚                    â”‚                â”‚
       "Fixes #42" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                    â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
    5. Maintainer reviews     â”‚                    â”‚                â”‚
       & merges PR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                    â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚                    â”‚  Webhook:          â”‚                â”‚
         â”‚                    â”‚  PR closed â”€â”€â”€â”€â”€â”€â”€â”€â–¶                â”‚
         â”‚                    â”‚  (merged=true)     â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚                    â”‚                Extract issue #      â”‚
         â”‚                    â”‚                from PR body         â”‚
         â”‚                    â”‚                (regex: Fixes #42)   â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚                    â”‚                Find bounty          â”‚
         â”‚                    â”‚                for issue #42        â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚                    â”‚                Update status        â”‚
         â”‚                    â”‚                to 'ready_to_claim'  â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚                    â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Post Comment           â”‚
         â”‚  â—€â”€â”€â”€â”€ Notificationâ”‚  "@contributor    â”‚                â”‚
         â”‚        from GitHub â”‚   claim your      â”‚                â”‚
         â”‚                    â”‚   50 USDC at..."  â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
    6. Click claim link       â”‚                    â”‚                â”‚
       (future dashboard) â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                â”‚
         â”‚                    â”‚                    â”‚                â”‚
    7. Login with GitHub      â”‚                    â”‚                â”‚
       (OAuth) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚                    â”‚                Verify user          â”‚
         â”‚                    â”‚                matches PR author    â”‚
         â”‚                    â”‚                    â”‚                â”‚
    8. Connect wallet         â”‚                    â”‚                â”‚
       (Phantom) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                â”‚
         â”‚                    â”‚                    â”‚                â”‚
    9. Click "Claim"          â”‚                    â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚                    â”‚                Transfer from        â”‚
         â”‚                    â”‚                escrow wallet â”€â”€â”€â”€â”€â”€â”€â–¶
         â”‚                    â”‚                    â”‚    Send 50     â”‚
         â”‚                    â”‚                    â”‚    USDC        â”‚
         â”‚                    â”‚                    â”‚                â”‚
         â”‚  â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  Transaction
         â”‚                    â”‚                    â”‚             confirmed!
         â”‚  "50 USDC          â”‚                    â”‚                â”‚
         â”‚   received!"       â”‚                Update status        â”‚
         â”‚                    â”‚                to 'claimed'         â”‚
         â”‚                    â”‚                    â”‚                â”‚
    âœ… BOUNTY CLAIMED!        â”‚                    â”‚                â”‚
         â”‚                    â”‚                    â”‚                â”‚
```

## Database State Machine

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     BOUNTY STATUS LIFECYCLE                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Label Added      â”‚
                        â”‚  (GitHub)         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”Œâ”€â”€â”€â”€â”€â”‚ pending_deposit   â”‚
                  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚               â”‚
                  â”‚               â”‚ Deposit detected
                  â”‚               â”‚ by monitor
                  â”‚               â–¼
                  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚     â”‚deposit_confirmed  â”‚
                  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚               â”‚
                  â”‚               â”‚ PR merged
                  â”‚               â”‚
                  â”‚               â–¼
                  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚     â”‚ ready_to_claim    â”‚
                  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚               â”‚
                  â”‚               â”‚ User claims
                  â”‚               â”‚ via dashboard
                  â”‚               â–¼
                  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚     â”‚    claimed        â”‚
                  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ Label removed
                  â”‚ (before deposit)
                  â”‚
                  â””â”€â”€â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    cancelled      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    COMPONENT INTERACTIONS                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Webhook Event                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Webhook Router                                 â”‚
â”‚                  (src/routes/webhooks.js)                         â”‚
â”‚                                                                   â”‚
â”‚  â€¢ Verify signature                                               â”‚
â”‚  â€¢ Route to appropriate handler                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
            â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Installation â”‚ â”‚   Issue      â”‚ â”‚  Pull Requestâ”‚
    â”‚   Handler    â”‚ â”‚  Labeled     â”‚ â”‚   Closed     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
           â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Bounty Service                            â”‚
    â”‚       (src/services/bounty.js)                    â”‚
    â”‚                                                   â”‚
    â”‚  â€¢ processBountyLabel()                           â”‚
    â”‚  â€¢ createBounty()                                 â”‚
    â”‚  â€¢ updateBountyStatus()                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                          â”‚
             â–¼                          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Solana Service â”‚       â”‚ GitHub Service â”‚
    â”‚ (solana.js)    â”‚       â”‚ (github.js)    â”‚
    â”‚                â”‚       â”‚                â”‚
    â”‚ â€¢ Create walletâ”‚       â”‚ â€¢ Post comment â”‚
    â”‚ â€¢ Check balanceâ”‚       â”‚ â€¢ Get issue    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                        â”‚
             â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Solana         â”‚       â”‚   GitHub       â”‚
    â”‚ Blockchain     â”‚       â”‚     API        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Deposit Monitor              â”‚
    â”‚   (deposit-monitor.js)         â”‚
    â”‚                                â”‚
    â”‚   Background service           â”‚
    â”‚   Check every 30s              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Database     â”‚
    â”‚   (SQLite)     â”‚
    â”‚                â”‚
    â”‚ â€¢ bounties     â”‚
    â”‚ â€¢ installationsâ”‚
    â”‚ â€¢ activity_log â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Example

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              EXAMPLE: Creating a 50 USDC Bounty                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Label Added: "Octavian:USDC:50"
   â†“
2. Webhook Payload:
   {
     "action": "labeled",
     "label": { "name": "Octavian:USDC:50" },
     "issue": {
       "number": 42,
       "repository": "myrepo"
     }
   }
   â†“
3. Parse Label:
   currency = "USDC"
   amount = 50
   â†“
4. Create Solana Wallet:
   keypair = Keypair.generate()
   publicKey = "7Np8E2rC..."
   privateKey = "encrypted..."
   â†“
5. Database Insert:
   INSERT INTO bounties (
     github_issue_number = 42,
     bounty_amount = 50,
     currency = "USDC",
     escrow_wallet_address = "7Np8E2rC...",
     status = "pending_deposit"
   )
   â†“
6. GitHub Comment:
   POST /repos/owner/repo/issues/42/comments
   body = "Deposit 50 USDC to 7Np8E2rC..."
   â†“
7. Activity Log:
   INSERT INTO activity_log (
     bounty_id = 1,
     event_type = "bounty_created",
     event_data = '{"amount": 50, "currency": "USDC"}'
   )
   â†“
8. Deposit Monitor Starts Watching...
   â†“
9. User Deposits 50 USDC to 7Np8E2rC...
   â†“
10. Monitor Detects:
    balance = await checkUSDCBalance("7Np8E2rC...")
    if (balance >= 50) {
      status = "deposit_confirmed"
    }
    â†“
11. Update Database:
    UPDATE bounties
    SET status = "deposit_confirmed",
        deposit_confirmed_at = NOW()
    WHERE id = 1
    â†“
12. Post Confirmation:
    POST /repos/owner/repo/issues/42/comments
    body = "âœ… Bounty Active!"
    â†“
13. Log Activity:
    INSERT INTO activity_log (
      bounty_id = 1,
      event_type = "status_changed",
      event_data = '{"status": "deposit_confirmed"}'
    )

COMPLETE! Bounty is now live and waiting for contributors.
```

## File Structure Flow

```
Request Flow Through Files:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GitHub Webhook
    â”‚
    â–¼
src/index.js
    â”‚ (Express app)
    â”‚
    â”œâ”€â–¶ app.use('/api/webhooks', webhookRoutes)
    â”‚
    â–¼
src/routes/webhooks.js
    â”‚ (Route handlers)
    â”‚
    â”œâ”€â–¶ webhooks.on('issues.labeled', ...)
    â”‚   â”‚
    â”‚   â–¼
    â”‚   src/services/bounty.js
    â”‚       â”‚
    â”‚       â”œâ”€â–¶ processBountyLabel()
    â”‚       â”‚   â”‚
    â”‚       â”‚   â”œâ”€â–¶ src/utils/parser.js
    â”‚       â”‚   â”‚   â””â”€â–¶ parseBountyLabel()
    â”‚       â”‚   â”‚
    â”‚       â”‚   â”œâ”€â–¶ src/services/solana.js
    â”‚       â”‚   â”‚   â””â”€â–¶ createEscrowWallet()
    â”‚       â”‚   â”‚
    â”‚       â”‚   â”œâ”€â–¶ src/db/database.js
    â”‚       â”‚   â”‚   â””â”€â–¶ INSERT INTO bounties
    â”‚       â”‚   â”‚
    â”‚       â”‚   â””â”€â–¶ src/services/github.js
    â”‚       â”‚       â””â”€â–¶ postIssueComment()
    â”‚       â”‚
    â”‚       â””â”€â–¶ logActivity()
    â”‚           â””â”€â–¶ INSERT INTO activity_log
    â”‚
    â””â”€â–¶ Response: 200 OK

Background Process:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

src/index.js
    â”‚ (After server start)
    â”‚
    â””â”€â–¶ depositMonitor.start()
        â”‚
        â–¼
    src/services/deposit-monitor.js
        â”‚
        â”œâ”€â–¶ setInterval(30s)
        â”‚   â”‚
        â”‚   â””â”€â–¶ checkPendingDeposits()
        â”‚       â”‚
        â”‚       â”œâ”€â–¶ src/services/bounty.js
        â”‚       â”‚   â””â”€â–¶ getBountyByStatus('pending_deposit')
        â”‚       â”‚
        â”‚       â”œâ”€â–¶ src/services/solana.js
        â”‚       â”‚   â””â”€â–¶ checkUSDCBalance()
        â”‚       â”‚
        â”‚       â”œâ”€â–¶ src/services/bounty.js
        â”‚       â”‚   â””â”€â–¶ updateBountyStatus()
        â”‚       â”‚
        â”‚       â””â”€â–¶ src/services/github.js
        â”‚           â””â”€â–¶ postIssueComment()
```

---

## Legend

```
 â”€â”€â–¶  Flow direction
 â”Œâ”€â”€â” Component/Service
 â”‚  â”‚ Process/Action
 â•â•â•  Major section
 Â·Â·Â·  Background process
 âœ…   Success state
 âŒ   Error state
 â³   Waiting state
 ğŸ’°   Money/Bounty related
```

---

**These diagrams show the complete flow of GitWork from all angles!**


